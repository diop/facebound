(window["webpackJsonpstreamlit-browser"]=window["webpackJsonpstreamlit-browser"]||[]).push([[18],{1230:function(t,e,r){"use strict";var n=r(6),o=r(14),a=r(12),i=r(13),c=r(0),u=r.n(c),l=r(135),s=r.n(l),g=r(19),p=r.n(g),f=r(25),h=r(11),d=r(32),y=function(){function t(){Object(n.a)(this,t)}return Object(h.a)(t,null,[{key:"get",value:function(){var e=Object(f.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.token){e.next=8;break}if(""===d.a.current.userMapboxToken){e.next=5;break}t.token=d.a.current.userMapboxToken,e.next=8;break;case 5:return e.next=7,this.fetchToken("https://data.streamlit.io/tokens.json","mapbox");case 7:t.token=e.sent;case 8:return e.abrupt("return",t.token);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchToken",value:function(){var t=Object(f.a)(p.a.mark(function t(e,r){var n,o,a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:n=t.sent,t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),new Error("".concat(t.t0.message," (").concat(e,")"));case 9:if(n.ok){t.next=11;break}throw new Error("Bad status: ".concat(n.status," (").concat(e,")"));case 11:return t.next=13,n.json();case 13:if(o=t.sent,null!=(a=o[r])&&""!==a){t.next=17;break}throw new Error('Missing token "'.concat(r,'" (').concat(e,")"));case 17:return t.abrupt("return",a);case 18:case"end":return t.stop()}},t,null,[[0,6]])}));return function(e,r){return t.apply(this,arguments)}}()}]),t}();y.token=void 0;var b=r(209),w=r(208),m=r(45);e.a=function(t){var e=function(e){function r(e){var i;return Object(n.a)(this,r),(i=Object(o.a)(this,Object(a.a)(r).call(this,e))).initMapboxToken=function(){y.get().then(function(t){return i.setState({mapboxToken:t})}).catch(function(t){return i.setState({mapboxTokenError:t})})},i.render=function(){return null!=i.state.mapboxTokenError?u.a.createElement(b.a,{width:i.props.width,name:"Error fetching Mapbox token",message:i.state.mapboxTokenError.message}):void 0===i.state.mapboxToken?u.a.createElement(w.a,{element:Object(m.e)("Loading...").get("alert"),width:i.props.width}):u.a.createElement(t,Object.assign({mapboxToken:i.state.mapboxToken},i.props))},i.state={mapboxToken:void 0,mapboxTokenError:void 0},i.initMapboxToken(),i}return Object(i.a)(r,e),r}(c.PureComponent);return e.displayName="withMapboxToken(".concat(t.displayName||t.name,")"),s()(e,t)}},1362:function(t,e){},1367:function(t,e){},1369:function(t,e){},1377:function(t,e){},1397:function(t,e){},1650:function(t,e,r){},2371:function(t,e,r){"use strict";r.r(e);var n=r(36),o=r(6),a=r(11),i=r(14),c=r(12),u=r(13),l=r(0),s=r.n(l),g=r(1357),p=r.n(g),f=r(1347),h=r(1245),d=r(107),y=r(214),b=r(1230);r(1356),r(1650);function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(r,!0).forEach(function(e){Object(n.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var v=function(t){function e(){var t,r;Object(o.a)(this,e);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return(r=Object(i.a)(this,(t=Object(c.a)(e)).call.apply(t,[this].concat(a)))).state={initialized:!1},r}return Object(u.a)(e,t),Object(a.a)(e,[{key:"componentDidMount",value:function(){this.setState({initialized:!0})}},{key:"getViewport",value:function(){var t=this.props.element.get("spec");return(t?JSON.parse(t):{}).viewport||{}}},{key:"generateViewState",value:function(t){var e=this.props,r=e.element,n=e.width,o=e.height,a=r.get("useContainerWidth");return{width:!t.width||a?n:t.width,height:t.height||o,longitude:t.longitude||0,latitude:t.latitude||0,pitch:t.pitch||0,bearing:t.bearing||0,zoom:t.zoom||1}}},{key:"render",value:function(){var t=this.getViewport(),e=this.generateViewState(t),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light-v9";if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith("mapbox://"))return t;return"mapbox://styles/mapbox/".concat(t)}(t.mapStyle);return s.a.createElement("div",{className:"deckglchart stDeckGlChart",style:{height:e.height,width:e.width}},s.a.createElement(p.a,{initialViewState:e,height:e.height,width:e.width,controller:!0,layers:this.state.initialized?this.buildLayers():[]},s.a.createElement(f.StaticMap,{height:e.height,width:e.width,mapStyle:r,mapboxApiAccessToken:this.props.mapboxToken})))}},{key:"buildLayers",value:function(){return this.props.element.get("layers").map(function(t){return function(t){var e=Object(d.d)(t.get("data")),r=JSON.parse(t.get("spec")),n=r.type?r.type.toLowerCase():"";switch(delete r.type,function(t,e){if(x.has(t)&&e.getLatitude&&e.getLongitude){var r=e.getLatitude,n=e.getLongitude;e.getPosition=function(t){return[t[n],t[r]]}}if(C.has(t)&&e.getLatitude&&e.getLongitude&&e.getTargetLatitude&&e.getTargetLongitude){var o=e.getLatitude,a=e.getLongitude,i=e.getTargetLatitude,c=e.getTargetLongitude;e.getSourcePosition=function(t){return[t[a],t[o]]},e.getTargetPosition=function(t){return[t[c],t[i]]}}if(L.has(t)&&e.getColorR&&e.getColorG&&e.getColorB){var u=e.getColorR,l=e.getColorG,s=e.getColorB,g=e.getColorA;e.getColor=function(t){return[t[u],t[l],t[s],t[g]]}}if(O.has(t)&&e.getColorR&&e.getColorG&&e.getColorB&&e.getTargetColorR&&e.getTargetColorG&&e.getTargetColorB){var p=e.getColorR,f=e.getColorG,h=e.getColorB,d=e.getColorA,y=e.getTargetColorR,b=e.getTargetColorG,w=e.getTargetColorB,m=e.getTargetColorA;e.getSourceColor=function(t){return[t[p],t[f],t[h],t[d]]},e.getTargetColor=function(t){return[t[y],t[b],t[w],t[m]]}}Object.keys(e).forEach(function(t){if(t.startsWith("get")){var r=e[t];e[t]="function"===typeof r?r:"string"===typeof r?function(t){return t[r]}:function(){return r}}})}(n,r),n){case"arclayer":return new g.ArcLayer(m({data:e},k.ArcLayer,{},r));case"gridlayer":return new g.GridLayer(m({data:e},k.GridLayer,{},r));case"hexagonlayer":return new g.HexagonLayer(m({data:e},k.HexagonLayer,{},r));case"linelayer":return new g.LineLayer(m({data:e},k.LineLayer,{},r));case"pointcloudlayer":return new g.PointCloudLayer(m({data:e},k.PointCloudLayer,{},r));case"scatterplotlayer":return new g.ScatterplotLayer(m({data:e},k.ScatterplotLayer,{},r));case"screengridlayer":return new g.ScreenGridLayer(m({data:e},k.ScreenGridLayer,{},r));case"textlayer":return new g.TextLayer(m({data:e},k.TextLayer,{},r));default:throw new Error('Unsupported layer type "'.concat(n,'"'))}}(t)}).toArray()}}]),e}(l.PureComponent);v.defaultProps={height:500};var k={ArcLayer:{getSourceColor:function(t){return t.colorR&&t.colorG&&t.colorB?[t.colorR,t.colorG,t.colorB,null==t.colorA?255:t.colorA]:S},getTargetColor:function(t){return t.targetColorR&&t.targetColorG&&t.targetColorB?[t.targetColorR,t.targetColorG,t.targetColorB,null==t.targetColorA?255:t.targetColorA]:S},getSourcePosition:j,getTargetPosition:P},GridLayer:{getPosition:j},HexagonLayer:{getPosition:j},LineLayer:{getSourcePosition:j,getTargetPosition:P},PointCloudLayer:{getColor:G,getPosition:function(t){return[T(t.longitude,t.lon,t.positionX,t.x),T(t.latitude,t.lat,t.positionY,t.y),T(t.latitude,t.lat,t.positionZ,t.z)]},getNormal:function(t){return[t.normalX,t.normalY,t.normalZ]}},ScatterplotLayer:{getColor:G,getPosition:j,getRadius:function(t){return T(t.radius,100)}},ScreenGridLayer:{getPosition:j,getWeight:function(t){return t.weight}},TextLayer:{getColor:G,getPixelOffset:function(t){return[T(t.pixelOffsetX,0),T(t.pixelOffsetY,0)]},getPosition:j,getAlignmentBaseline:"bottom"}};var x=new Set(["gridlayer","hexagonlayer","scatterplotlayer","screengridlayer","textlayer"]),C=new Set(["arclayer","linelayer"]),L=new Set(["pointcloudlayer","scatterplotlayer","textlayer"]),O=new Set(["arclayer"]);function T(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0;n<e.length;n+=1)if(null!=e[n])return e[n];return null}function j(t){return[T(t.longitude,t.lon),T(t.latitude,t.lat)]}function P(t){return[T(t.longitude2,t.lon2),T(t.latitude2,t.lat2)]}var S=[200,30,0,160];function G(t){return t.colorR&&t.colorG&&t.colorB?[t.colorR,t.colorG,t.colorB,null==t.colorA?255:t.colorA]:S}var A=Object(h.flowRight)(b.a,y.a)(v);r.d(e,"default",function(){return A})}}]);
//# sourceMappingURL=18.6e905522.chunk.js.map